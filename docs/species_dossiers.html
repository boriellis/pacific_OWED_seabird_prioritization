<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>species_dossiers</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="species_dossiers_files/libs/clipboard/clipboard.min.js"></script>
<script src="species_dossiers_files/libs/quarto-html/quarto.js"></script>
<script src="species_dossiers_files/libs/quarto-html/popper.min.js"></script>
<script src="species_dossiers_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="species_dossiers_files/libs/quarto-html/anchor.min.js"></script>
<link href="species_dossiers_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="species_dossiers_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="species_dossiers_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="species_dossiers_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="species_dossiers_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#species-background-information" id="toc-species-background-information" class="nav-link active" data-scroll-target="#species-background-information">Species Background Information</a>
  <ul class="collapse">
  <li><a href="#short-tailed-albatross" id="toc-short-tailed-albatross" class="nav-link" data-scroll-target="#short-tailed-albatross">Short-tailed Albatross</a>
  <ul class="collapse">
  <li><a href="#species-distribution-habitat-and-movement-information" id="toc-species-distribution-habitat-and-movement-information" class="nav-link" data-scroll-target="#species-distribution-habitat-and-movement-information">Species distribution, habitat, and movement information</a></li>
  <li><a href="#range-map" id="toc-range-map" class="nav-link" data-scroll-target="#range-map">Range Map</a></li>
  <li><a href="#ebird-sightings-in-pocs-region" id="toc-ebird-sightings-in-pocs-region" class="nav-link" data-scroll-target="#ebird-sightings-in-pocs-region">eBird Sightings in POCS Region</a></li>
  </ul></li>
  <li><a href="#townsends-storm-petrel" id="toc-townsends-storm-petrel" class="nav-link" data-scroll-target="#townsends-storm-petrel">Townsend’s Storm Petrel</a>
  <ul class="collapse">
  <li><a href="#species-distribution-habitat-and-movement-information-1" id="toc-species-distribution-habitat-and-movement-information-1" class="nav-link" data-scroll-target="#species-distribution-habitat-and-movement-information-1">Species distribution, habitat, and movement information</a></li>
  <li><a href="#range-map-1" id="toc-range-map-1" class="nav-link" data-scroll-target="#range-map-1">Range Map</a></li>
  <li><a href="#ebird-sightings-in-pocs-region-1" id="toc-ebird-sightings-in-pocs-region-1" class="nav-link" data-scroll-target="#ebird-sightings-in-pocs-region-1">eBird Sightings in POCS Region</a></li>
  </ul></li>
  <li><a href="#hawaiian-petrel" id="toc-hawaiian-petrel" class="nav-link" data-scroll-target="#hawaiian-petrel">Hawaiian Petrel</a>
  <ul class="collapse">
  <li><a href="#species-distribution-habitat-and-movement-information-2" id="toc-species-distribution-habitat-and-movement-information-2" class="nav-link" data-scroll-target="#species-distribution-habitat-and-movement-information-2">Species distribution, habitat, and movement information</a></li>
  <li><a href="#range-map-2" id="toc-range-map-2" class="nav-link" data-scroll-target="#range-map-2">Range Map</a></li>
  <li><a href="#ebird-sightings-in-pocs-region-2" id="toc-ebird-sightings-in-pocs-region-2" class="nav-link" data-scroll-target="#ebird-sightings-in-pocs-region-2">eBird Sightings in POCS Region</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">




<section id="species-background-information" class="level1">
<h1>Species Background Information</h1>
<p>It is not necessary for you to have first-hand experience with the species to contribute to this exercise: we have collated background knowledge on the species to ensure a common baseline of information between expert respondents. Please review the below information from the BirdLife International’s DataZone on the range and distribution of each species before progressing, keeping in mind that as they are threatened and poorly understood pelagic species, it can be assumed that the below information and maps are based on limited data. We have also provided the eBird citizen science sightings maps for the species in the POCS region - note that these density maps are not standardized by effort and so it can be assumed that the distributions shown are biased heavily by where observers are.</p>
<p>We encourage you to use your own knowledge, experience, information sources on the species to supplement the provided information in informing your responses.</p>
<section id="short-tailed-albatross" class="level2">
<h2 class="anchored" data-anchor-id="short-tailed-albatross">Short-tailed Albatross</h2>
<section id="species-distribution-habitat-and-movement-information" class="level3">
<h3 class="anchored" data-anchor-id="species-distribution-habitat-and-movement-information">Species distribution, habitat, and movement information</h3>
<p>“Short-tailed Albatross is a rare seabird of the northern Pacific Ocean. The species breeds almost exclusively on islands off of Japan, though recent nesting at Midway Atoll in Hawaii gives hope that this albatross will expand its breeding range and give a bit more stability to this precariously small population. Short-tailed Albatross is extremely rare in the Neotropics, as it occurs only casually off of the northwestern Mexican coast; however, the lack of much pelagic coverage in this region might cause the species to be underreported. Farther north in North America, the species is rare along the west coast of the contiguous United States and Canada, but is frequently observed in Alaskan waters.”</p>
<p>Habitat at sea is “Marine and pelagic, with concentrations in areas of upwelling.”</p>
<p>“Movements poorly known, probably disperses widely in N Pacific above 30º N, reaching the Gulf of Alaska and W coast of N America, as in past. During breeding season, records concentrated in region of NW Pacific SE of Honshu (Japan), but numbers decline in May and birds head N; maximum numbers (gatherings of &gt; 100 birds around fishing boats) (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/shtalb/cur/references#REF176088">Howell, 2012</a>) occur in Bering Sea (to at least 60º N) (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/shtalb/cur/references#REF104913">Camp, 1993</a>) and off Aleutians in Jun–Aug (though records span period Mar–Oct) (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/shtalb/cur/references#REF176088">Howell, 2012</a>), with some occasionally entering Sea of Okhotsk (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/shtalb/cur/references#REF104800">Tickell, 2000</a>) and moving S along W coast of North America as far as S California (records year-round, but mostly Aug–Apr and immatures, mainly since 1980s) (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/shtalb/cur/references#REF176088">Howell, 2012</a>), with a record of an adult off W Mexico at 19º26’ N 110º44’ W (Apr 1990) (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/shtalb/cur/references#REF145065">Santaella &amp; Sada, 1991</a>). Satellite tracking indicates that, during post-breeding period, females spend more time off Japan and Russia, while males and juveniles move further N &amp; E, around the Aleutian Islands, Bering Sea and off W North America (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/shtalb/cur/references#REF178755">Suryan et al., 2007</a>); furthermore, juveniles known to travel twice the distance per day and spend more time over continental shelf waters than adults (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/shtalb/cur/references#REF178755">Suryan et al., 2007</a>).”</p>
<p><em>Source: Carboneras, C., F. Jutglar, and G. M. Kirwan (2020).&nbsp;Short-tailed Albatross&nbsp;(Phoebastria albatrus), version 1.0. In Birds of the World (J. del Hoyo, A. Elliott, J. Sargatal, D. A. Christie, and E. de Juana, Editors). Cornell Lab of Ornithology, Ithaca, NY, USA.&nbsp;<a href="https://go.openathens.net/redirector/ucsc.edu?url=https%3A%2F%2Fdoi.org%2F10.2173%2Fbow.shtalb.01" target="_blank">https://doi.org/10.2173/bow.shtalb.01</a></em></p>
</section>
<section id="range-map" class="level3">
<h3 class="anchored" data-anchor-id="range-map">Range Map</h3>
<p><img src="images/Screenshot%202025-03-27%20at%2012.39.44.png" class="img-fluid"></p>
<p><em>Source: <a href="https://datazone.birdlife.org/species/factsheet/short-tailed-albatross-phoebastria-albatrus" target="_blank">Birdlife International DataZone</a></em></p>
</section>
<section id="ebird-sightings-in-pocs-region" class="level3">
<h3 class="anchored" data-anchor-id="ebird-sightings-in-pocs-region">eBird Sightings in POCS Region</h3>
<p><img src="images/Screenshot%202025-03-27%20at%2014.04.56.png" class="img-fluid" width="456"></p>
<p><em>Source: <a href="https://ebird.org/home" target="_blank">eBird</a></em></p>
</section>
</section>
<section id="townsends-storm-petrel" class="level2">
<h2 class="anchored" data-anchor-id="townsends-storm-petrel">Townsend’s Storm Petrel</h2>
<section id="species-distribution-habitat-and-movement-information-1" class="level3">
<h3 class="anchored" data-anchor-id="species-distribution-habitat-and-movement-information-1">Species distribution, habitat, and movement information</h3>
<p>“Currently, it breeds exclusively in the Morro Prieto Islet (also known as Negro Islet) and Zapato Islet (also known as Afuera Islet). Some pairs might also breed on Guadalupe Island, but this requires further information.”</p>
<p>“At-sea range poorly known, but is known to range only between 35º N and 10º N in the eastern Pacific, being fairly common to uncommon off southern California between June and early November (mainly July–September), at least in some years. Nothing further known.”</p>
<p><em>Source: Kirwan, G. M., F. Medrano, J. Hernández-Montoya, A. Duarte, and J. González-Solís (2023).&nbsp;Townsend’s Storm-Petrel&nbsp;(Hydrobates socorroensis), version 2.0. In Birds of the World (B. K. Keeney, Editor). Cornell Lab of Ornithology, Ithaca, NY, USA.&nbsp;<a href="https://go.openathens.net/redirector/ucsc.edu?url=https%3A%2F%2Fdoi.org%2F10.2173%2Fbow.leastp5.02" target="_blank">https://doi.org/10.2173/bow.leastp5.02</a></em></p>
</section>
<section id="range-map-1" class="level3">
<h3 class="anchored" data-anchor-id="range-map-1">Range Map</h3>
<p><img src="images/Screenshot%202025-03-27%20at%2012.40.02.png" class="img-fluid"></p>
<p><em>Source: <a href="https://datazone.birdlife.org/species/factsheet/townsends-storm-petrel-hydrobates-socorroensis" target="_blank">Birdlife International DataZone</a></em></p>
</section>
<section id="ebird-sightings-in-pocs-region-1" class="level3">
<h3 class="anchored" data-anchor-id="ebird-sightings-in-pocs-region-1">eBird Sightings in POCS Region</h3>
<p><img src="images/Screenshot%202025-03-27%20at%2014.04.25.png" class="img-fluid" width="307"></p>
<p><em>Source: <a href="https://ebird.org/home" target="_blank">eBird</a></em></p>
</section>
</section>
<section id="hawaiian-petrel" class="level2">
<h2 class="anchored" data-anchor-id="hawaiian-petrel">Hawaiian Petrel</h2>
<section id="species-distribution-habitat-and-movement-information-2" class="level3">
<h3 class="anchored" data-anchor-id="species-distribution-habitat-and-movement-information-2">Species distribution, habitat, and movement information</h3>
<p><em>Please note that the below text is copied from the Birds of the World account for Hawaiian Petrel, but is not updated since the Galapagos/Hawaiian Petrel split from the former Dark-rumped Petrel. Particular sections thought to be irrelevant to Hawaiian Petrel have been italicized, and the section noting the lack of overlap in the at-sea ranges of the 2 species has been bolded:</em></p>
<p>“Away from breeding grounds occurs primarily in equatorial waters of the eastern tropical Pacific, generally between 20°N and 10°S (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF56444">Pitman 1986</a>). Usually encountered as solitary birds that are not actively feeding. Feeding most often noted when birds join mixed-species flocks feeding on live prey (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF12319">Pitman and Ballance 1997</a>). In spring found to 25°N (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF47718">King 1970</a>); in Jul and Aug to 50°N in s. Gulf of Alaska (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF12299">Bourne 1965</a>,&nbsp;<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF33969">Bourne and Dixon 1975</a>).</p>
<p><strong>A hiatus in distribution appears to exist between 120°W to 130°W and south of 10°N, suggesting little overlap in at sea ranges of Galapagos and Hawaiian populations (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF12314">Jones 1965a</a>,&nbsp;<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF44336">Bartle et al.&nbsp;1993</a>,&nbsp;<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF49304">Spear et al.&nbsp;1995a</a>). West of 120°W individuals presumed to be of Hawaiian origin were recorded south only to 3°S, <em>whereas southeast of the Galapagos Is. individuals were recorded to 17°S (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF49304">Spear et al.&nbsp;1995a</a>). The 2 subspecies not distinguishable at sea, however.</em></strong></p>
<p><em>Occurs sparingly eastward well offshore from w. Mexico, sw. Ecuador (up to 6 in a day off Santa Elena Peninsula; R. S. Ridgely pers. comm.), and n.&nbsp;Peru.</em> Only recently recorded off coasts of Oregon and California, with 4 records since 1986 from May to Oct (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF44350">Pyle et al.&nbsp;1993</a>,&nbsp;<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF34152">Howell and Pyle 1997</a>). Extreme western records include a bird collected at Negros I., Philippines, in Mar (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF12320">Rabor et al.&nbsp;1970</a>); a bird collected at Ternate I., Moluccas, in Apr (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF32393">Bourne 1967a</a>); and a bird found in n.&nbsp;Honshu, Japan, in Sep (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF12317">Nakamura 1979a</a>). Bartle et al.&nbsp;(<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF44336">Bartle et al.&nbsp;1993</a>) note that the dates of these records, and the fact that the bird reported by Bourne (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF32393">Bourne 1967a</a>) was in molt, suggest that juveniles migrate into w. Pacific after fledging.”</p>
<p>“Banko (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF59028">Banko 1980a</a>) summarizes several accounts of aggregations of Dark-rumped Petrels in nearshore Hawaiian waters; there is some evidence that birds congregate in nearshore staging areas before flying inland during breeding season (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF56442">Ainley et al.&nbsp;1995b</a>). Spear et al.&nbsp;(<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF49304">Spear et al.&nbsp;1995a</a>) reported on the marine habitat features associated with 110 Dark-rumped Petrels sighted in Hawaiian waters during cruises conducted in central Pacific from 1980 to 1994. Average conditions for the sightings were as follows: sea surface temperature 26.7°C, sea surface salinity 34.43 ppt, thermocline depth 56 m, wind speed 31 km/h, wave height 1.4 m, cloud cover 4.2 oktas. When compared with birds sighted in Galapagos waters, Hawaiian birds occurred in waters having significantly shallower thermoclines, lower wind speeds, and lower wave heights. Densities of Hawaiian birds showed a negative relationship to sea surface temperatures that ranged from 25 to 28°C, a positive relationship to wind speeds above 20-40 km/h, and a general preference for waters of the North Equatorial Current (<a href="https://birdsoftheworld-org.us1.proxy.openathens.net/bow/species/hawpet1/cur/references#REF49304">Spear et al.&nbsp;1995a</a>).”</p>
<p><em>Source: Simons, T. R. and C. N. Bailey (2020).&nbsp;Hawaiian Petrel&nbsp;(Pterodroma sandwichensis), version 1.0. In Birds of the World (A. F. Poole and F. B. Gill, Editors). Cornell Lab of Ornithology, Ithaca, NY, USA.&nbsp;<a href="https://go.openathens.net/redirector/ucsc.edu?url=https%3A%2F%2Fdoi.org%2F10.2173%2Fbow.hawpet1.01" target="_blank">https://doi.org/10.2173/bow.hawpet1.01</a></em></p>
</section>
<section id="range-map-2" class="level3">
<h3 class="anchored" data-anchor-id="range-map-2">Range Map</h3>
<p><img src="images/Screenshot%202025-03-27%20at%2012.40.27.png" class="img-fluid"></p>
<p><em>Source: <a href="https://datazone.birdlife.org/species/factsheet/hawaiian-petrel-pterodroma-sandwichensis" target="_blank">Birdlife International DataZone</a></em></p>
</section>
<section id="ebird-sightings-in-pocs-region-2" class="level3">
<h3 class="anchored" data-anchor-id="ebird-sightings-in-pocs-region-2">eBird Sightings in POCS Region</h3>
<p><img src="images/Screenshot%202025-03-27%20at%2014.05.16.png" class="img-fluid" width="446"></p>
<p><em>Source: <a href="https://ebird.org/home" target="_blank">eBird</a></em></p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>